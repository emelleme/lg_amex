var widgetAPI=new Common.API.Widget,tvKey=new Common.API.TVKeyValue,pluginObj=new Common.API.Plugin,leftCount=0,rightCount=0,upCount=0;curIndex=0;
var Main={level:{MOSAIC:1,NEWS:2,GALLERY:3,VIDEO:4,CARDS:5,TERMS:6,TERMSPAGE:7,MENU:8,NOSTATE:9,BUFFERING:10},activeTitle:"Tips & Trends",MENU_POS:0,MAX_ITEMS:5,CUR_POS:1,CUR_ROW:2,CUR_COL:1,PREV_ROW:2,PREV_COL:1,MAX_ROW:4,NEWS_POS:1,VIDEO_POS:1,MAX_VIDEO:3,CDN:"http://3b8ffb0b6ca1c4312d7a-f6478897881b831aa0d618e78a4be408.r12.cf1.rackcdn.com/",INTROVIDEO:"http://3b8ffb0b6ca1c4312d7a-f6478897881b831aa0d618e78a4be408.r12.cf1.rackcdn.com/amex_fashion_app_carolinaHerrera_2mbps.mp4",HARPERSVIDEO:"http://3b8ffb0b6ca1c4312d7a-f6478897881b831aa0d618e78a4be408.r12.cf1.rackcdn.com/amex_fashion_app_ch5_2mbps.mp4",
GALLERYITEMACTIVE:0,GOBACK:0,curLevel:1,prevLevel:1,prevPage:["travel"],pageDepth:0,selectedVideo:0,mode:0,mute:0,UP:0,DOWN:1,WINDOW:0,FULLSCREEN:1,NMUTE:0,YMUTE:1,clearActive:function(){$(".activeImage").removeClass("activeImage");$(".arrows").hide();$(".hover, .backbtn").removeClass("hover");$("#termsconditions a").removeClass("hover");$("#icon-"+Main.NEWS_POS).css("background-image","url("+$("#icon-"+Main.NEWS_POS).attr("data-thumbnailinactive")+")");$(".navbar .container ul li:eq("+Main.MENU_POS+
") a").removeClass("hover")},IMAGE_MATRIX:{1:{1:"2-1",2:"1-2",3:"3-4",4:null},2:{1:"2-1",2:"1-2",3:"1-2",4:"1-2"},3:{1:"2-1",2:"3-2",3:"3-4",4:"3-4"},4:{1:"4-1",2:"4-1",3:"4-3",4:"4-3"},5:{1:"4-1",2:"4-1",3:"4-3",4:"4-3"},6:{1:"6-2",2:"6-2",3:"6-3",4:"6-3"}}},hideDiv=function(){this.hide()};
Main.showHandler=function(){var a=document.getElementById("pluginObjectNNavi");alert("[APPS] : setBannerstate : 2");a.SetBannerState(2);pluginObj.unregistKey(tvKey.KEY_VOL_UP);pluginObj.unregistKey(tvKey.KEY_VOL_DOWN);pluginObj.unregistKey(tvKey.KEY_MUTE);pluginObj.registKey(tvKey.KEY_EXIT)};
Main.CountDownTimer=function(a){var b=new Date(a),c;c=setInterval(function(){var a=b-new Date;if(0>a)clearInterval(c);else{var e=Math.floor(a/864E5),f=Math.floor(a%864E5/36E5),a=Math.floor(a%36E5/6E4);$(".num-days").html(e);$(".num-hours").html(f);$(".num-mins").html(a)}},1E3)};
Main.onLoad=function(){$("body").css("background-color","#000000");$(".videoDetails").css("height","0px");$.preloadCssImages();window.onShow=Main.showHandler;Player.init()&&Audio.init()?(Player.stopCallback=function(){Main.setWindowMode()},this.enableKeys(),widgetAPI.sendReadyEvent()):alert("Failed to initialise");var a=curWidget.id;alert("TESTING GOOGLE ANALYTICS");alert("#################################################################################");alert("############################################################################WIDGET_ID ="+
a);alert("#################################################################################");alert("#################################################################################");$("#inactive").hide();widgetAPI.sendReadyEvent()};
Main.firstLoad=function(){$("#main-copy").hide().html($("#benefit_"+Main.CUR_ROW+"-"+Main.CUR_COL).html()).show();$("#image_"+Main.IMAGE_MATRIX[Main.CUR_ROW][Main.CUR_COL]).addClass("activeImage");alert(Main.IMAGE_MATRIX[Main.CUR_ROW][Main.CUR_COL]);document.getElementById("anchor").onkeydown=Main.travelKeys};Main.onUnload=function(){Player.deinit()};Main.enableKeys=function(){};
Main.tracker=function(a){a.title?alert(a.title):a.title=Main.activeTitle;var b=document.getElementById("pluginObjectNetwork"),b=document.getElementById("pluginObjectNNavi").GetDUID(b.GetHWaddr());a.deviceid=b;"Page Load"===a.action||"Initial Load"===a.action?("Initial Load"===a.action&&(a.title+=" (Initial Load)",window._gaq.push(["_setCustomVar",1,"deviceid",a.deviceid,1])),window._gaq.push(["_trackPageview",a.title])):window._gaq.push(["_trackEvent","Videos",a.action,a.title]);$.post("http://sdev.amxp.cc/tipstrends/track/",
a).done(function(a){alert("Tracker: "+a)}).fail(function(){alert("error")})};
var app=angular.module("amex",[]).service("MainService",["$rootScope",function(){return{title:"AMEX Experience",setTitle:function(a){this.title=a},loadApp:function(){document.getElementById("anchor").focus();widgetAPI.sendReadyEvent()},travelUrl:"http://s.amxp.cc/travel/layout.html",recipesUrl:"http://s.amxp.cc/designerspotlight/layout.html",videosUrl:"http://s.amxp.cc/videos/layout.html",cardsUrl:"http://s.amxp.cc/shopsmall/slayout.html",termsUrl:"http://s.amxp.cc/terms/layout.html"}}]).controller("MainController",
["MainService","$scope",function(a,b){b.title=Main.title;b.viewCount=a.viewCount;b.setTitle=function(a){b.title=a};b.firstLoad=function(){$("#main-copy").hide().html($("#benefit_"+Main.CUR_ROW+"-"+Main.CUR_COL).html()).show();$("#image_"+Main.IMAGE_MATRIX[Main.CUR_ROW][Main.CUR_COL]).addClass("activeImage");alert(Main.IMAGE_MATRIX[Main.CUR_ROW][Main.CUR_COL]);document.getElementById("anchor").onkeydown=Main.travelKeys};b.travelUrl=a.travelUrl;b.videosUrl=a.videosUrl;b.recipesUrl=a.recipesUrl;b.cardsUrl=
a.cardsUrl;b.termsUrl=a.termsUrl;b.$on("MainService.update",function(a,d){b.title=d});$(document).ready(function(){document.getElementById("anchor").focus();$("#cardsView").hide();$("#recipesView").hide();$("#videosView").hide();$("#termsView").hide();var a=document.getElementById("pluginObjectTV"),b={};a?(b.timezone=a.GetTimeZone(),b.devicetype=a.GetProductType(),b.productcode=a.GetProductCode(1)):(b.timezone="unknown",b.devicetype="unknown",b.productcode="unknown");b.title="Tips Trends";b.action=
"Initial Load";window._gaq=window._gaq||[];window._gaq.push(["_setAccount","UA-34841906-3"]);window._gaq.push(["_setDomainName","amxp.cc"]);Main.tracker(b)})}]);